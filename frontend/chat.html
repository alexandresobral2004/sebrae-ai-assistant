<!DOCTYPE html>
<html lang="pt-BR">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Assistente IA Sebrae - Consultor inteligente para empreendedorismo brasileiro">
    <meta name="keywords" content="Sebrae, IA, Consultoria, Empreendedorismo, GestÃ£o">
    <meta name="author" content="Sebrae">

    <title>Consultor IA Sebrae | InteligÃªncia para o Empreendedorismo</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸš€</text></svg>">

    <!-- Design Tokens (Figma Integration) -->
    <link rel="stylesheet" href="/static/design-tokens.css">

    <!-- Copilot Style -->
    <link rel="stylesheet" href="/static/copilot-style.css">

    <!-- CSS (fallback para estilos antigos) -->
    <!-- <link rel="stylesheet" href="/static/styles.css"> --> <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Fallback para Segoe UI-like font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>

  <body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
      <div class="loading-spinner"></div>
      <p>Inicializando Assistente IA...</p>
    </div>

    <!-- Header -->
    <header class="header">
      <div class="container header-content">
        <div class="logo-section">
          <span class="logo-icon">ğŸš€</span>
          <div>
            <h1 class="logo-title">Consultor IA Sebrae</h1>
            <p class="logo-subtitle">InteligÃªncia para o Empreendedorismo Brasileiro</p>
          </div>
        </div>

        <div class="header-status">
          <div id="user-info" style="display: flex; align-items: center; gap: 12px; margin-right: 20px;">
            <img id="user-avatar" src="" alt="Avatar"
              style="width: 32px; height: 32px; border-radius: 50%; display: none;">
            <span id="user-name" style="font-size: 14px; font-weight: 500;"></span>
            <button id="logout-btn" class="btn-outline" style="padding: 6px 12px; font-size: 13px;">Sair</button>
          </div>
          <div id="status-indicator" class="status-indicator">
            <span class="status-dot"></span>
            <span id="status-text">Inicializando...</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
      <div class="container">
        <!-- Dashboard/Home Page -->
        <div id="home-page" class="page active">
          <!-- Metrics Section -->
          <section class="metrics-section">
            <div class="metric-card">
              <div class="metric-icon">ğŸ“š</div>
              <div class="metric-content">
                <div id="metric-docs" class="metric-number">0</div>
                <div class="metric-label">Documentos</div>
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-icon">ğŸ‘¥</div>
              <div class="metric-content">
                <div id="metric-consultores" class="metric-number">0</div>
                <div class="metric-label">Consultores</div>
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-icon">ğŸ’¬</div>
              <div class="metric-content">
                <div id="metric-consultas" class="metric-number">0</div>
                <div class="metric-label">Consultas Hoje</div>
              </div>
            </div>
          </section>

          <!-- Feature Cards -->
          <section class="features-section">
            <div class="feature-card feature-card-blue" onclick="showPage('chat')">
              <div class="feature-icon">ğŸ¤–</div>
              <h3 class="feature-title">Consultor IA</h3>
              <p class="feature-description">
                Converse com a IA especialista em Sebrae. Busca prioritÃ¡ria na base local
                com fallback inteligente para informaÃ§Ãµes atualizadas.
              </p>
              <button class="btn btn-primary">Iniciar Consulta</button>
            </div>

            <div class="feature-card feature-card-orange" onclick="showPage('documents')">
              <div class="feature-icon">ğŸ“‚</div>
              <h3 class="feature-title">Gerenciar Documentos</h3>
              <p class="feature-description">
                Adicione novos documentos Ã  base de conhecimento local. Suporte para PDF,
                DOCX e XLSX com processamento automÃ¡tico.
              </p>
              <button class="btn btn-secondary">Gerenciar Arquivos</button>
            </div>
          </section>
        </div>

        <!-- Chat Page -->
        <div id="chat-page" class="page">
          <div class="page-header">
            <button class="btn btn-back" onclick="showPage('home')">
              â† Voltar ao InÃ­cio
            </button>
            <button class="btn btn-outline" onclick="clearChat()">
              ğŸ”„ Nova Conversa
            </button>
          </div>

          <div class="chat-container">
            <div id="chat-messages" class="chat-messages">
              <!-- Messages will be inserted here -->
            </div>

            <div class="chat-input-container">
              <textarea id="chat-input" class="chat-input"
                placeholder="Digite sua pergunta sobre empreendedorismo, gestÃ£o ou produtos Sebrae..."
                rows="3"></textarea>
              <button id="send-button" class="btn btn-send" onclick="sendMessage()">
                Enviar
              </button>
            </div>
          </div>
        </div>

        <!-- Documents Page -->
        <div id="documents-page" class="page">
          <div class="page-header">
            <button class="btn btn-back" onclick="showPage('home')">
              â† Voltar ao InÃ­cio
            </button>
          </div>

          <div class="documents-container">
            <!-- EstatÃ­sticas da Base -->
            <section class="base-stats-section">
              <div class="stats-header">
                <h2>ğŸ“Š EstatÃ­sticas da Base de Conhecimento</h2>
                <button class="btn btn-outline" onclick="loadBaseStats()">
                  ğŸ”„ Atualizar
                </button>
              </div>

              <div class="stats-grid">
                <div class="stat-box">
                  <div class="stat-icon">ğŸ“„</div>
                  <div class="stat-content">
                    <div id="stat-chunks" class="stat-value">-</div>
                    <div class="stat-label">Total de Chunks</div>
                  </div>
                </div>

                <div class="stat-box">
                  <div class="stat-icon">ğŸ“</div>
                  <div class="stat-content">
                    <div id="stat-files" class="stat-value">-</div>
                    <div class="stat-label">Arquivos Processados</div>
                  </div>
                </div>

                <div class="stat-box">
                  <div class="stat-icon">ğŸ•</div>
                  <div class="stat-content">
                    <div id="stat-updated" class="stat-value">-</div>
                    <div class="stat-label">Ãšltima AtualizaÃ§Ã£o</div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Upload Section -->
            <section class="upload-section">
              <h2>ğŸ“¤ Adicionar Novos Documentos</h2>

              <div class="upload-area" id="upload-area">
                <div class="upload-icon">ğŸ“</div>
                <p class="upload-text">Arraste arquivos aqui ou clique para selecionar</p>
                <p class="upload-hint">Suporte para PDF, DOCX, XLSX, TXT, MD</p>
                <input type="file" id="file-input" multiple accept=".pdf,.docx,.xlsx,.txt,.md" hidden>
                <button class="btn btn-primary" onclick="document.getElementById('file-input').click()">
                  Selecionar Arquivos
                </button>
              </div>

              <div id="selected-files" class="selected-files"></div>

              <button id="upload-button" class="btn btn-success" onclick="uploadFiles()" style="display: none;">
                ï¿½ Fazer Upload
              </button>
            </section>

            <!-- Gerenciamento da Base -->
            <section class="base-management-section">
              <div class="management-header">
                <h2>ğŸ”§ Gerenciar Base de Dados</h2>
                <div class="management-actions">
                  <button class="btn btn-primary" onclick="processarDiretorioCompleto()">
                    ğŸ”„ Atualizar Base (Processar Novos)
                  </button>
                  <button class="btn btn-outline" onclick="limparBaseCompleta()">
                    ğŸ—‘ï¸ Limpar Base Completa
                  </button>
                </div>
              </div>

              <div class="info-box info-box-blue">
                <div class="info-icon">ğŸ’¡</div>
                <div class="info-content">
                  <strong>Como funciona:</strong>
                  <ul>
                    <li>âœ… <strong>Upload de Arquivos:</strong> Adicione novos documentos usando o formulÃ¡rio acima</li>
                    <li>ğŸ”„ <strong>Atualizar Base:</strong> Processa apenas arquivos novos ou modificados (incremental)
                    </li>
                    <li>âš¡ <strong>Inteligente:</strong> Sistema detecta automaticamente quais arquivos jÃ¡ foram
                      processados</li>
                    <li>ï¿½ï¸ <strong>Limpar Base:</strong> Remove todos os documentos processados (requer confirmaÃ§Ã£o)
                    </li>
                  </ul>
                </div>
              </div>

              <div id="processing-log" class="processing-log" style="display: none;">
                <h3>ğŸ“‹ Log de Processamento</h3>
                <div id="log-content" class="log-content"></div>
              </div>
            </section>

            <!-- Lista de Documentos -->
            <section class="documents-list-section">
              <h2>ğŸ“š Arquivos Processados na Base</h2>
              <div id="processed-files-list" class="documents-list">
                <p class="text-muted">Carregando...</p>
              </div>
            </section>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container footer-content">
        <p>&copy; 2025 Sebrae - Sistema de Apoio Ã s Micro e Pequenas Empresas</p>
        <p>ğŸ”’ Dados protegidos | ğŸŒ <a href="https://www.sebrae.com.br" target="_blank">www.sebrae.com.br</a></p>
      </div>
    </footer>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- JavaScript -->
    <script src="/static/app.js"></script>
  </body>

</html>
